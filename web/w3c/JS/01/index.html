<!DOCTYPE html>
<html>
    <body>
        <h2>what js can do?</h2>
        <p> js can change dom content</p>
        <button type="button" onclick="document.getElementById('demo').innerHTML = 'hello \
         js!'">fuck me!</button>
        <button type="button" onclick="document.write(12+14)">document.write</button>
        <button type="button" onclick="myfunction()">jsfunction</button>
        <p id='demo'> test </p>
        <p></p>
        <button onclick="this.innerHTML = Date()"></button>
        <script>
            document.getElementById('demo').innerHTML = 6 + 5;
            document.write(11 + 4);
            console.log(12 + 14);
            var x,y,z;
            x = 22;
            y = 11;
            z = x + y;
            // x = 'hello';
            console.log('========================');
            console.log(Math.pow(5,2));
            var f23 = 5 ** 2;
            console.log(f23);
            var str = 'hello'

            console.log('========================');
            // 赋值
            var fuzhileft = 6, fuzhiright = 1;
            fuzhileft >>>= fuzhiright;
            console.log(fuzhileft);
            console.log('========================');
            var cars = ['hello','world'];
            var typestr = 'hello';
            console.log(typeof(cars)); // cars是object
            console.log(typeof(typestr));
            console.log(typeof(1.5));
            console.log(typeof(null));
            console.log(typeof(undefined));

            function myfunction(){
                document.getElementById('demo').innerHTML = str + x + y + z;
                document.getElementById('mydiv').innerHTML = 'fs !';
            }

            var daicanres = daicanMethod(3,5);
            function daicanMethod(p1,p2){
                return p1 * p2;
            }
            
            console.log('========================');
            console.log(daicanMethod('asdf',5));
            console.log(daicanres); 
            console.log('========================');
            var person = {
                name: 'bob',
                age: 20,
                name: function(){
                    return this.name;
                }
            };
            person.name;

            var objstr = new String("bil");
            console.log(typeof(objstr));

            var str = "The full name of China is the People's Republic of China.";
            var pos = str.lastIndexOf("China");
            console.log(str.length);
            console.log(pos);
            console.log(''.length);
            console.log(str.search('China'));
            // document.getElementById("demo").innerHTML = pos;    
            var conststr = '10';
            var testnum = 20;
            console.log(conststr + testnum);
            console.log(testnum + conststr);

            var nannum = NaN;
            console.log(nannum);
            console.log(typeof(NaN));
            var transnum = 128;
            console.log(transnum.toString(2));
            console.log((1.98).toFixed(1));
            console.log(Number("123124"));
            var x = Number.MAX_VALUE;

            var testNum = 10;
            (function f(){
                if(false){
                    var testNum = 10;
                    console.log("ge");
                }
                console.log(testNum);
            }());


            function f(){console.log('out')};
            // (function(){
            //     function f(); // undefined
            //     if(false){
            //         f = {
            //             console.log('inside'); // log inside
            //         }
            //     }
            //     f(); // 超出作用域 undefined;
            // })

            var fruites = ['a','b','c'];
            // fruites.forEach({

            // });

            console.log(`asdfsadg
            sadf
            sadf`);
            fruites.push('sadfg');
            console.log(fruites);
            fruites[7] = 'sadf';
            console.log(fruites);
            console.log(fruites[6]);
            console.log(fruites.slice(0,3));
            console.log(fruites.shift());
            console.log(fruites);
            console.log(fruites.unshift('new a'));
            console.log(fruites);

            var spliceArr = ['mic','apple','yahoo','aol','excite','sad5tasd'];
            spliceArr.splice(2,3,'gsadf','fasdt');
            console.log(spliceArr);
            console.log(spliceArr.join('-'));
            console.log('dick' in person);
            console.log('name' in person);
            console.log(person.hasOwnProperty('toString'));
            // alert('test');

            var m = new Map([['m',981],['n',34]]);
            var s = new Set();
            console.log(m.get('m'));
            for(var x of m){
                console.log(x);
            }
            var testinproarr = [1,2,3];
            testinproarr.name = 'hello';
            for(var x in testinproarr){
                console.log(x);
            }

            testinproarr.forEach(function(index){
                console.log(  ' ' + index);//第一个为值
                // console.log(arrar);
            });
            var news = new Set(['a','b','c']);
            news.forEach(function(element){
                console.log(element);
            });

            var abs = function(x){
                console.log(x);
                console.log("print");
            }

            abs(2);

            function fooargu(x){
                for(var i = 0; i< arguments.length ;i++){
                    console.log('arg' + i + ' ' + arguments[i]);
                }
            }
            fooargu(1,2,3);


            function fooRest(a,b,...rest){
                console.log(a);
                console.log(b);
                console.log(rest);
            }

            fooRest(1,2,3,4,5,6);

            console.log("=================");
            function host1(){
                var x = 'hello' + y;
                console.log(x);
                var y = 'bob';
            }
            host1();
            var course = 'lear js';
            // alert(course);
            // alert(window.course);

            window.host1();// 全局变量全都变成window的成员。

            // namespace    
            var MYAPP = {};
            
            function foo(){
                var sum = 0;
                // const sd = 3;
                // sd = 3;
                for(let i = 0; i< 100; i++){
                    //
                }
                // console.log(i);
            }

            foo();

            let [,, xl] = [1,2,3];
            console.log(xl);

            var persondis = {
                name1:'esadf',
                age1:12
            };

            var {nam23e,a23ge} = persondis;
            console.log(nam23e + a23ge);
            // var {name1,age1} = persondis;
            // console.log(name1);
            let {name1,age1:id} = persondis;
            console.log(id);
            
            var pro1,pro2;
            ({pro1,pro2} = {pro1: "hel", pro2:'sdf'});
            ({pro1, pro2="sdaf"} = {pro1: "hel"});
            console.log(pro1 + pro2);
            [pro1,pro2] = [pro2,pro1];
            console.log(pro1 + pro2);
            var {hostname:domain, pathname: path} = location;
            console.log(domain + path);
            'use strict';
            function getAge() {
                var y = new Date().getFullYear();
                return y - this.birth;
            }

            var xiaoming = {
                name: '小明',
                birth: 1990,
                age: getAge
            };

            console.log(getAge.apply(xiaoming,[]));

            // xiaoming.age(); // 25, 正常结果
            // getAge(); // NaN
            // var fn = xiaoming.age();
            // console.log(typeof(fn));
            // // fn();


            // var persontest = {
            //     name: 'sdf',
            //     age: function(){
            //         var that = this;
            //         function getAgefunc(){
            //             var y = new Date().getFullYear();
            //             return y - that.birth;
            //         }
            //         return getAgefunc();
            //     }
            // }
            // persontest.age();

            function parin(){

            }
            var pcount = 0;
            var oldparin = parin;
            window.parin = function(){
                pcount ++;
                return oldparin.apply(null,arguments);
            };
            parin();
            parin();
            console.log(pcount);


            // map reduce
            var reduarr = [1,2,3];
            var res = reduarr.reduce(function(x,y){
                return x*y;
            });
            console.log(res);

            var filterArr = [1,2,3,3,2,1,3,5,76,7];
            var r = filterArr.filter(function(element,index,self){
                return self.indexOf(element) == index;
            });

            console.log(r);

            var rs = filterArr.sort(function(x,y){
                return x < y ? -1 : 1;
            });

            console.log(rs);

            var evarr = ['apple','pear','orange'];
            console.log(evarr.every(function (s){
                return s.length > 0;
            }));

            console.log(evarr.find(function (s){
                return s.toLowerCase() === s;
            }));
 

            function countfunc(){
                var arr = [];
                for(var i = 0;i <= 3;i++){
                    arr.push(function(n){
                        return function(){
                            return n * n;
                        }
                    }(i));
                }

                return arr;
            }

            var results = countfunc();
            var f1 = results[0];
            console.log(f1());


            var nimingObj = {
                birth: 1990,
                getAge: function(){
                    var b = this.birth;
                    // var fn = function(){
                    //     return new Date().getFullYear - this.birth;
                    // };
                    // return fn();
                    var fn = () => new Date().getFullYear() - this.birth;
                    return fn()
                }
            }


            function* foogen(x){
                yield x + 1;
                yield x + 2;
                yield x + 3;
                return x + 3;
            }

            function* fibgen(max){
                var 
                    t,
                    a = 0,
                    b = 1,
                    n = 0;
                while(n < max){
                    yield a;
                    [a, b] = [b, a+ b];
                    n ++;
                }
                return ;
            }

            // var f = fibgen(5);
            // console.log(f.next());
            // console.log(f.next());
            // console.log(f.next());
            // console.log(f.next());
            // console.log(f.next());
            // console.log(f.next());

            for(var x of fibgen(10)){
                console.log(x);
            }

            var re1 = /ABC\-001/;
            var reg2 = new RegExp('/ABC\-001/');

            var re3 = /^\d{3}\-\d{3,8}/;
            console.log(re3.test('010-12345'));
            var s3 = 'a,b;;c   f';
            console.log(s3.split(/[\s\,\;]+/));

            var reex1 = /^(\d{3})-(\d{3,8})$/;
            console.log(reex1.exec('010-12345'));
            console.log(reex1.exec('010 123'));

            var xiaoming = {
                name: '小明',
                age: 14,
                gender: true,
                height: 1.65,
                grade: null,
                'middle-school': '\"W3C\" Middle School',
                skills: ['JavaScript', 'Java', 'Python', 'Lisp'],
                toJSON: function(){
                    return {
                        'Name': this.name,
                        'Age': this.age
                    };
                }
            };
            console.log(JSON.stringify(xiaoming, null, '  '));
            console.log(JSON.stringify(xiaoming,['name','skills'],'   '));


            function convert(key, value){
                if(typeof value === 'string'){
                    return value.toUpperCase();
                }
                return value;
            }
            console.log(JSON.stringify(xiaoming, convert, '  '));
            console.log(JSON.stringify(xiaoming));
            var obj = JSON.parse('{"name":"小明","age":14}',function(key,value){
                if(key ==='name'){
                    return value + '同学';
                }
                return value;
            });
            console.log(obj);
            console.log(JSON.stringify(obj));
        </script>
    </body>
</html>